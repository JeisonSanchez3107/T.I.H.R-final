<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Factura {{ factura.numero_factura }}</title>
    <style>
        @page {
            size: letter;
            margin: 1.5cm;
        }
        
        body {
            font-family: 'Helvetica', Arial, sans-serif;
            color: #6b7280;
            line-height: 1.6;
            font-size: 11px;
        }
        
        .header {
            margin-bottom: 40px;
        }
        
        .header table {
            width: 100%;
            border: none;
        }
        
        .logo-section {
            width: 40%;
            vertical-align: top;
        }
        
        .company-info {
            margin-top: 15px;
            color: #6b7280;
            font-size: 10px;
            line-height: 1.8;
        }
        
        .factura-section {
            width: 60%;
            text-align: right;
            vertical-align: top;
        }
        
        .factura-title {
            font-size: 36px;
            color: #9ca3af;
            font-weight: 300;
            letter-spacing: 8px;
            margin: 0;
            text-transform: uppercase;
        }
        
        .factura-numero {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 5px;
        }
        
        .cliente-info {
            margin: 30px 0;
            background-color: #ffffff;
        }
        
        .cliente-info table {
            width: 100%;
            border: none;
        }
        
        .info-row {
            margin-bottom: 8px;
        }
        
        .info-label {
            color: #6b7280;
            font-size: 10px;
            display: inline-block;
            width: 120px;
        }
        
        .info-value {
            color: #374151;
            font-size: 11px;
        }
        
        .separator {
            border-bottom: 1px solid #e5e7eb;
            margin: 25px 0;
        }
        
        table.productos {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
        }
        
        table.productos thead {
            background-color: #9ca3af;
            color: white;
        }
        
        table.productos th {
            padding: 12px 10px;
            text-align: left;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        table.productos td {
            padding: 15px 10px;
            border-bottom: 1px solid #e5e7eb;
            font-size: 10px;
            color: #6b7280;
        }
        
        .right {
            text-align: right;
        }
        
        .center {
            text-align: center;
        }
        
        .totals-section {
            margin-top: 30px;
        }
        
        .totals-table {
            margin-left: auto;
            width: 300px;
            border: none;
        }
        
        .totals-table td {
            padding: 8px 15px;
            font-size: 11px;
            color: #6b7280;
            border: none;
        }
        
        .totals-label {
            text-align: right;
            text-transform: uppercase;
            font-size: 10px;
            letter-spacing: 0.5px;
        }
        
        .totals-value {
            text-align: right;
            font-weight: 600;
            color: #374151;
        }
        
        .total-final-row {
            border: 2px solid #374151;
            background-color: #ffffff;
        }
        
        .total-final-row td {
            padding: 12px 15px;
            font-size: 12px;
            font-weight: 700;
            color: #111827;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .footer {
            margin-top: 60px;
            padding-top: 20px;
        }
        
        .footer-message {
            color: #9ca3af;
            font-style: italic;
            font-size: 11px;
            margin-bottom: 30px;
        }
        
        .firma-section {
            text-align: right;
        }
        
        .firma-line {
            border-top: 1px solid #9ca3af;
            width: 200px;
            display: inline-block;
            margin-bottom: 5px;
        }
        
        .firma-label {
            color: #9ca3af;
            font-size: 10px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <table>
            <tr>
                <td class="logo-section">
                    <!-- Logo de la empresa -->
                    <div style="margin-bottom: 10px;">
                        <div style="width: 120px; height: 120px; border: 2px solid #9ca3af; border-radius: 50%; display: inline-block; padding: 10px;">
                            <div style="text-align: center; padding-top: 35px;">
                                <div style="font-size: 16px; color: #6b7280; font-weight: 300; font-style: italic;">Tu Idea</div>
                                <div style="font-size: 12px; color: #9ca3af;">Hecha Realidad</div>
                            </div>
                        </div>
                    </div>
                    <div class="company-info">
                        <div>Mail: info@tuideahecharealidad.com</div>
                        <div>Teléfono: +57 300 123 4567</div>
                        <div>Dirección: Calle Principal 123,</div>
                        <div>Ciudad, Colombia</div>
                    </div>
                </td>
                <td class="factura-section">
                    <h1 class="factura-title">FACTURA</h1>
                    <div class="factura-numero">Número: {{ factura.numero_factura }}</div>
                </td>
            </tr>
        </table>
    </div>
    
    <div class="separator"></div>
    
    <!-- Cliente Information -->
    <div class="cliente-info">
        <table>
            <tr>
                <td style="width: 50%; vertical-align: top;">
                    <div class="info-row">
                        <span class="info-label">Nombre:</span>
                        <span class="info-value">{{ factura.nombre_cliente }}</span>
                    </div>
                    {% if pago.cedula %}
                    <div class="info-row">
                        <span class="info-label">Cédula:</span>
                        <span class="info-value">{{ pago.cedula }}</span>
                    </div>
                    {% endif %}
                    {% if factura.direccion_cliente %}
                    <div class="info-row">
                        <span class="info-label">Dirección:</span>
                        <span class="info-value">{{ factura.direccion_cliente }}</span>
                    </div>
                    {% endif %}
                    {% if factura.telefono_cliente %}
                    <div class="info-row">
                        <span class="info-label">Teléfono:</span>
                        <span class="info-value">{{ factura.telefono_cliente }}</span>
                    </div>
                    {% endif %}
                </td>
                <td style="width: 50%; vertical-align: top;">
                    <div class="info-row">
                        <span class="info-label">Fecha:</span>
                        <span class="info-value">{{ factura.fecha_emision|date:"d/m/Y" }}</span>
                    </div>
                    {% if factura.email_cliente %}
                    <div class="info-row">
                        <span class="info-label">Email:</span>
                        <span class="info-value">{{ factura.email_cliente }}</span>
                    </div>
                    {% endif %}
                    <div class="info-row">
                        <span class="info-label">Condición de pago:</span>
                        <span class="info-value">{{ pago.get_estado_display }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Método de pago:</span>
                        <span class="info-value">{{ pago.get_metodo_pago_display }}</span>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    
    <!-- Products Table -->
    <table class="productos">
        <thead>
            <tr>
                <th style="width: 45%;">DESCRIPCIÓN</th>
                <th class="center" style="width: 15%;">CANTIDAD</th>
                <th class="right" style="width: 20%;">PRECIO</th>
                <th class="right" style="width: 20%;">TOTAL</th>
            </tr>
        </thead>
        <tbody>
            {% for producto in productos %}
            <tr>
                <td>{{ producto.nombre }} - {{ producto.categoria|title }}</td>
                <td class="center">{{ producto.cantidad }}</td>
                <td class="right">${{ producto.precio_unitario|floatformat:2 }}</td>
                <td class="right">${{ producto.subtotal|floatformat:2 }}</td>
            </tr>
            {% endfor %}
            <!-- Filas vacías para espaciado -->
            <tr><td colspan="4" style="border: none; padding: 5px;"></td></tr>
            <tr><td colspan="4" style="border: none; padding: 5px;"></td></tr>
        </tbody>
    </table>
    
    <!-- Totals -->
    <div class="totals-section">
        <table class="totals-table">
            <tr>
                <td class="totals-label">SUBTOTAL</td>
                <td class="totals-value">${{ factura.subtotal|floatformat:2 }}</td>
            </tr>
            {% if factura.impuestos > 0 %}
            <tr>
                <td class="totals-label">IMPUESTO (19%)</td>
                <td class="totals-value">${{ factura.impuestos|floatformat:2 }}</td>
            </tr>
            {% endif %}
            <tr class="total-final-row">
                <td class="totals-label">TOTAL</td>
                <td class="totals-value">${{ factura.total|floatformat:2 }}</td>
            </tr>
        </table>
    </div>
    
    <!-- Footer -->
    <div class="footer">
        <div class="footer-message">
            Gracias por su compra.
        </div>
        <div class="firma-section">
            <div class="firma-line"></div>
            <div class="firma-label">Firma</div>
        </div>
    </div>
</body>
</html>
